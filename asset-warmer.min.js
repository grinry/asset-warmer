!function(e){function t(s){if(n[s])return n[s].exports;var r=n[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,s){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){var s;!function(r){"use strict";function i(e){this.name=e,this.callbacks=[]}var o=function(e,t){this.VERSION="0.0.4",this.const={STATUS:{FLIGHT:"flight",PENDING:"pending",PROGRESS:"progress",FINISHED:"finished",FAILED:"failed"}},this.events=[],this.files=[],this.options={},this.registerEvent("update"),this.registerEvent("asset_appended"),this.registerEvent("finished"),this.registerEvent("appended"),this.options=this._mergeOptions({byOrder:!0,preFlight:!1,appendStyles:!0,appendScripts:!0,appendAtOnce:!1,appendWhenDone:!0},t),this._prepare(e)};o.prototype.registerEvent=function(e){this.events[e]=new i(e)},o.prototype.dispatch=function(e,t){this.events[e].callbacks.forEach(function(e){e(t)})},o.prototype.on=function(e,t){return this.events.hasOwnProperty(e)?this.events[e].callbacks.push(t):console.warn("asset-warmer: Event `"+e+"` is not registered."),this},o.prototype._mergeOptions=function(e,t){var n={};for(var s in e)n[s]=e[s];for(var s in t)n[s]=t[s];return n},o.prototype._prepare=function(e){var t=this.const.STATUS.PENDING;if(this.options.preFlight&&(t=this.const.STATUS.FLIGHT),!e||void 0===e)throw"asset-warmer: No files added to load!";if("string"==typeof e)e=[e];else if(void 0===e.length&&e){var n=e,s={};if(!n.hasOwnProperty("src"))throw"asset-warmer: File object doesn't have `src` property.";s.src=n.src,o=this.getFileExtension(n.src),n.hasOwnProperty("name")?s.name=n.name:s.name=s.src.replace(/^.*[\\\/]/,""),n.hasOwnProperty("size")&&(s.size=n.size),e=[s]}for(var r=0;r<e.length;r++){var i,o,a,p=e[r],l=0;if("string"==typeof p)i=p.replace(/^.*[\\\/]/,""),o=this.getFileExtension(i),a=p;else{if(!p.hasOwnProperty("src"))return void console.warn("asset-warmer: File object doesn't have `src` property.",a);a=p.src,o=this.getFileExtension(p.src),i=p.hasOwnProperty("name")?p.name:a.replace(/^.*[\\\/]/,""),p.hasOwnProperty("size")&&(l=p.size)}this.files.push({src:a,name:i,total:l,loaded:null,percentage:null,knownLength:!1,type:o,status:t})}this.options.preFlight?this._beginFlight():this._begin()},o.prototype._beginFlight=function(){var e=this,t=this.files.filter(function(t){return t.status===e.const.STATUS.FLIGHT});t.length?this._flightDownload(t[0]):this._begin()},o.prototype._begin=function(){var e=this,t=this.files.filter(function(t){return t.status===e.const.STATUS.PENDING});t.length?this._download(t[0]):(this.dispatch("finished",this.files),this.options.appendWhenDone&&this._appendAll())},o.prototype._download=function(e){function t(e,t,n){e.status=t.const.STATUS.PROGRESS,e.knownLength=n.lengthComputable,e.loaded=n.loaded,e.total=parseInt(n.lengthComputable?n.total:e.total),e.percentage=n.lengthComputable?t.fixPercent(n.loaded/n.total*100):0,t.dispatch("update",{file:e,type:"asset_progress",progress:t.progressInfo(),event:n})}function n(e,t,n){e.status=t.const.STATUS.FINISHED,t.dispatch("update",{file:e,type:"asset_loaded",progress:t.progressInfo(),event:n}),t._begin()}function s(e,t,n,s){e.status=t.const.STATUS.FAILED,t.dispatch("update",{file:e,type:"asset_failed",progress:t.progressInfo(),event:s,errorType:n}),t._begin()}var r;r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r.onprogress=t.bind(null,e,this),r.addEventListener("load",n.bind(null,e,this),!1),r.addEventListener("error",s.bind(null,e,this,"error"),!1),r.addEventListener("abort",s.bind(null,e,this,"abort"),!1),r.open("GET",e.src,!0),r.getResponseHeader("Content-Length"),r.send()},o.prototype._flightDownload=function(e){function t(e,t,n){}function n(e,t,n){var s=r.getResponseHeader("Content-Length");e.status=t.const.STATUS.PENDING,s&&(e.total=parseInt(s)),t._beginFlight()}function s(e,t,n,s){t._beginFlight()}var r;r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r.onprogress=t.bind(null,e,this),r.addEventListener("load",n.bind(null,e,this),!1),r.addEventListener("error",s.bind(null,e,this,"error"),!1),r.addEventListener("abort",s.bind(null,e,this,"abort"),!1),r.open("HEAD",e.src,!0),r.getResponseHeader("Content-Length"),r.send()},o.prototype._appendAll=function(){for(var e=this,t=this.files.filter(function(t){return t.status===e.const.STATUS.FINISHED}),n=0;n<t.length;n++){var s,r=t[n];"js"===r.type?this.options.appendScripts&&(s=document.createElement("script"),s.type="text/javascript",s.src=r.src,document.getElementsByTagName("head")[0].appendChild(s),this.dispatch("asset_appended",r.file)):"css"===r.type&&this.options.appendStyles&&(s=document.createElement("link"),s.rel="stylesheet",s.href=r.src,s.media="screen",document.getElementsByTagName("head")[0].appendChild(s),this.dispatch("asset_appended",r.file))}this.dispatch("appended",this.files)},o.prototype.bytesLoaded=function(){for(var e=0,t=0;t<this.files.length;t++)e+=+this.files[t].loaded;return e},o.prototype.bytesTotal=function(){for(var e=0,t=0;t<this.files.length;t++)e+=+this.files[t].total;return e},o.prototype.progressInfo=function(){var e=this,t=e.files.filter(function(t){return t.status===e.const.STATUS.FINISHED}).length,n=e.bytesLoaded(),s=e.bytesTotal(),r=e.files.length;return{bytes:{loaded:n,total:s,percentage:e.fixPercent(n/s*100)},files:{loaded:t,loading:t+1>r?r:t+1,total:r,percentage:e.fixPercent(t/r*100)},result:t==r?"finished":"progress"}},o.prototype.fixPercent=function(e){return e>100&&(e=100),parseFloat(e).toFixed(3)},o.prototype.getFileExtension=function(e){return e.split(/[?#]/)[0].split(".").pop()},void 0!==(s=function(){return o}.call(t,n,t,e))&&(e.exports=s),"undefined"!=typeof window&&(window.Warmer=o)}()}]);